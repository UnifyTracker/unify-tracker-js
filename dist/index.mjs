/*!
 * @unify-tracker/js v0.1.0
 * UnifyTracker JS SDK
 * (c) 2026 UnifyTracker
 * Released under the AGPL-3.0-only license.
 */
var at=Object.defineProperty;var ye=Object.getOwnPropertySymbols;var ot=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable;var J=(e,t,r)=>t in e?at(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))ot.call(t,r)&&J(e,r,t[r]);if(ye)for(var r of ye(t))st.call(t,r)&&J(e,r,t[r]);return e};var v=(e,t,r)=>J(e,typeof t!="symbol"?t+"":t,r);function ve(e,t){let r=null;return function(...n){let i=this;r!==null&&clearTimeout(r),r=setTimeout(()=>{r=null,e.apply(i,n)},t)}}function be(e){try{let t=window.location.hostname,r=new URL(e,window.location.href).hostname;return!!r&&r!==t}catch(t){return!1}}function ct(e){try{let t="__DOUBLE_ASTERISK_TOKEN__",r="__SINGLE_ASTERISK_TOKEN__",i=e.replace(/\*\*/g,t).replace(/\*/g,r).replace(/[.+?^${}()|[\]\\]/g,"\\$&");i=i.replace(/\//g,"\\/");let s=i.replace(new RegExp(t,"g"),".*").replace(new RegExp(r,"g"),"[^/]+");return new RegExp("^"+s+"$")}catch(t){return a(`Invalid pattern: ${e}`,t),null}}function G(e,t=[]){if(!t||t.length===0)return null;for(let r of t){let n=ct(r);if(n&&n.test(e))return r}return null}function o(...e){l.debug&&console.log("[UnifyTracker]",...e)}function a(...e){l.debug&&console.error("[UnifyTracker Error]",...e)}function C(){let e=new URL(window.location.href),t=e.pathname;return e.hash&&(t+=e.hash),t}var x={debounce:500,skipPatterns:[],maskPatterns:[],debug:!1},b={autoTrackPageviews:!0,autoTrackSpaRoutes:!0,trackQuerystring:!0,trackOutboundLinks:!0,trackWebVitals:!1,captureErrors:!1,enableSessionReplay:!1},W=null,l=new Proxy({},{get:(e,t)=>{var r,n;return W?W[t]:(t!=="debug"&&a("UnifyTracker SDK accessed before initialization. Call uniTracker.init() first."),(n=(r=x[t])!=null?r:b[t])!=null?n:void 0)},set:()=>(a("UnifyTracker config is read-only after initialization."),!1)});async function lt(e,t){var r,n,i,s,u,c,f;try{o("Fetching remote configuration...");let d=new AbortController,P=setTimeout(()=>d.abort(),3e3),w=await fetch(`${e}/site/${t}/tracking-config`,{signal:d.signal});if(clearTimeout(P),w.ok){let m=await w.json();return o("Remote configuration fetched successfully",m),{autoTrackPageviews:(r=m.trackInitialPageView)!=null?r:b.autoTrackPageviews,autoTrackSpaRoutes:(n=m.trackSpaNavigation)!=null?n:b.autoTrackSpaRoutes,trackQuerystring:(i=m.trackUrlParams)!=null?i:b.trackQuerystring,trackOutboundLinks:(s=m.trackOutbound)!=null?s:b.trackOutboundLinks,trackWebVitals:(u=m.webVitals)!=null?u:b.trackWebVitals,captureErrors:(c=m.trackErrors)!=null?c:b.captureErrors,enableSessionReplay:(f=m.sessionReplay)!=null?f:b.enableSessionReplay}}else return a(`Failed to fetch remote config: ${w.status}`),null}catch(d){return d.name==="AbortError"?a("Remote config fetch timed out"):a("Error fetching remote config:",d),null}}async function Te(e){var f,d;if(W)return a("UnifyTracker SDK already initialized."),!1;if(typeof e!="object"||e===null)return a("Invalid configuration provided to uniTracker.init(). Expected an object."),!1;let t=e.analyticsHost;if(!t||t.trim()==="")return a("`analyticsHost` is required in UnifyTracker config and must be a non-empty string."),!1;let r=t.replace(/\/$/,""),n=e.siteId;if(!n||n.trim()==="")return a("`siteId` is required in UnifyTracker config and must be a non-empty string."),!1;let s=await lt(r,n)||b,u=Array.isArray(e.skipPatterns)?e.skipPatterns:x.skipPatterns,c=Array.isArray(e.maskPatterns)?e.maskPatterns:x.maskPatterns;return W={analyticsHost:r,siteId:n,debounce:Math.max(0,(f=e.debounce)!=null?f:x.debounce),skipPatterns:u,maskPatterns:c,debug:(d=e.debug)!=null?d:x.debug,replayPrivacyConfig:e.replayPrivacyConfig,autoTrackPageviews:s.autoTrackPageviews,autoTrackSpaRoutes:s.autoTrackSpaRoutes,trackQuerystring:s.trackQuerystring,trackOutboundLinks:s.trackOutboundLinks,trackWebVitals:s.trackWebVitals,captureErrors:s.captureErrors,enableSessionReplay:s.enableSessionReplay},!0}var T=null,X=!1;try{let e=localStorage.getItem("unitracker-user-id");e&&(T=e),localStorage.getItem("disable-unitracker")!==null&&(X=!0)}catch(e){a("localStorage unavailable")}typeof window!="undefined"&&window.__UNITRACKER_OPTOUT__&&(X=!0);function p(e,t={}){if(X){o("Opted out of tracking.");return}if(!l||!l.analyticsHost||!l.siteId){a("UniTracker config not available. Ensure UnifyTracker.init() was called successfully.");return}let{eventName:r,properties:n,pathOverride:i,webVitals:s}=t;if((e==="custom_event"||e==="performance")&&!r){a("Event name is required and must be a string for performance or custom events.");return}try{let u=new URL(window.location.href),c,f="";if(e==="pageview"&&typeof i=="string"&&i.trim()){o(`Using path override: ${i}`);try{let N=new URL(i,"http://dummybase");c=N.pathname,f=N.search||"",o(`Parsed override path: ${c}, search: ${f}`)}catch(N){a(`Invalid pathOverride format: ${i}. Using window location.`),c=C(),f=l.trackQuerystring?u.search:""}}else c=C(),f=l.trackQuerystring?u.search:"";if(e!=="performance"&&G(c,l.skipPatterns)){o(`Skipping track for path: ${c}`);return}let d=G(c,l.maskPatterns);d&&e!=="performance"&&(o(`Masking path ${c} as ${d}`),c=d,f="");let P=h(h(h(h({site_id:l.siteId,hostname:u.hostname,pathname:c,querystring:f,screenWidth:window.screen.width,screenHeight:window.screen.height,language:navigator.language,page_title:document.title,referrer:document.referrer||"direct",type:e},(e==="custom_event"||e==="performance")&&{event_name:r}),(e==="custom_event"||e==="outbound")&&Object.keys(n!=null?n:{}).length>0&&{properties:JSON.stringify(n)}),e==="performance"&&s&&h({},s)),T&&{user_id:T});o("Sending track event:",P);let w=JSON.stringify(P),m=`${l.analyticsHost}/track`;navigator.sendBeacon?navigator.sendBeacon(m,new Blob([w],{type:"application/json"}))||(a("sendBeacon failed, falling back to fetch."),Ee(m,w)):Ee(m,w)}catch(u){a("Error during tracking:",u)}}function Ee(e,t){fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:t,mode:"cors",keepalive:!0}).catch(r=>{a("Fetch request failed:",r)})}function Se(e){if(e.trim()===""){a("User ID must be a non-empty string");return}T=e.trim();try{localStorage.setItem("unitracker-user-id",T),o("User identified:",T)}catch(t){a("Could not persist user ID to localStorage")}}function we(){T=null;try{localStorage.removeItem("unitracker-user-id"),o("User ID cleared")}catch(e){a("Could not remove user ID from localStorage")}}function Y(){return T}var E,$=!1,D=[],Z="";function Pe(){if($){o("Automatic tracking already set up.");return}if(!l.autoTrackPageviews){o("Automatic pageview tracking is disabled.");return}if(o("Setting up automatic tracking..."),Z=C(),E=l.debounce&&l.debounce>0?ve(()=>{let e=C();Ce(e),p("pageview")},l.debounce):()=>{let e=C();Ce(e),p("pageview")},requestAnimationFrame(()=>{E()}),l.autoTrackSpaRoutes){o("Setting up SPA route change tracking.");let e=history.pushState,t=history.replaceState;history.pushState=function(...r){e.apply(this,r),E()},history.replaceState=function(...r){t.apply(this,r),E()},window.addEventListener("popstate",E)}else o("SPA route change tracking is disabled.");window.addEventListener("hashchange",E),$=!0}function Re(){o("Setting up data attribute and outbound link tracking."),document.addEventListener("click",Ie,!0)}function Ie(e){if(!(e.target instanceof Element))return;let t=e.target;for(;t;){if(t.hasAttribute("data-unitracker-event")){let r=t.getAttribute("data-unitracker-event");if(r){let n={};for(let i of t.attributes)if(i.name.startsWith("data-unitracker-prop-")){let s=i.name.replace("data-unitracker-prop-","");n[s]=i.value}o("Data attribute event triggered:",r,n),p("custom_event",{eventName:r,properties:n})}break}t=t.parentElement}if(l.trackOutboundLinks&&e.target instanceof Element){let r=e.target.closest("a");if(r&&r.href&&be(r.href)){o("Outbound link clicked:",r.href);let n={url:r.href,text:r.innerText||r.textContent||"",target:r.target||"_self"};p("outbound",{properties:n})}}}function Ue(e){return D.push(e),o("Page change callback added"),()=>{D=D.filter(t=>t!==e),o("Page change callback removed")}}function Ce(e){let t=Z;Z=e,t!==e&&(o(`Page changed from ${t} to ${e}`),D.forEach(r=>{try{r(e,t)}catch(n){a("Error in page change callback:",n)}}))}function Le(){$&&(o("Cleaning up automatic tracking listeners."),window.removeEventListener("popstate",E),window.removeEventListener("hashchange",E),document.removeEventListener("click",Ie,!0),D=[],$=!1)}var $e=-1,I=e=>{addEventListener("pageshow",t=>{t.persisted&&($e=t.timeStamp,e(t))},!0)},k=(e,t,r,n)=>{let i,s;return u=>{t.value>=0&&(u||n)&&(s=t.value-(i!=null?i:0),(s||i===void 0)&&(i=t.value,t.delta=s,t.rating=((c,f)=>c>f[1]?"poor":c>f[0]?"needs-improvement":"good")(t.value,r),e(t)))}},se=e=>{requestAnimationFrame(()=>requestAnimationFrame(()=>e()))},ce=()=>{let e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},O=()=>{var t;let e=ce();return(t=e==null?void 0:e.activationStart)!=null?t:0},y=(e,t=-1)=>{let r=ce(),n="navigate";return $e>=0?n="back-forward-cache":r&&(document.prerendering||O()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:n}},ee=new WeakMap;function le(e,t){return ee.get(e)||ee.set(e,new t),ee.get(e)}var re=class{constructor(){v(this,"t");v(this,"i",0);v(this,"o",[])}h(t){var i;if(t.hadRecentInput)return;let r=this.o[0],n=this.o.at(-1);this.i&&r&&n&&t.startTime-n.startTime<1e3&&t.startTime-r.startTime<5e3?(this.i+=t.value,this.o.push(t)):(this.i=t.value,this.o=[t]),(i=this.t)==null||i.call(this,t)}},A=(e,t,r={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){let n=new PerformanceObserver(i=>{Promise.resolve().then(()=>{t(i.getEntries())})});return n.observe(h({type:e,buffered:!0},r)),n}}catch(n){}},ue=e=>{let t=!1;return()=>{t||(e(),t=!0)}},R=-1,xe=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,z=e=>{document.visibilityState==="hidden"&&R>-1&&(R=e.type==="visibilitychange"?e.timeStamp:0,ut())},De=()=>{addEventListener("visibilitychange",z,!0),addEventListener("prerenderingchange",z,!0)},ut=()=>{removeEventListener("visibilitychange",z,!0),removeEventListener("prerenderingchange",z,!0)},Ve=()=>{var e;if(R<0){let t=O(),r=document.prerendering||(e=globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden"&&n.startTime>t)[0])==null?void 0:e.startTime;R=r!=null?r:xe(),De(),I(()=>{setTimeout(()=>{R=xe(),De()})})}return{get firstHiddenTime(){return R}}},B=e=>{document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},Oe=[1800,3e3],de=(e,t={})=>{B(()=>{let r=Ve(),n,i=y("FCP"),s=A("paint",u=>{for(let c of u)c.name==="first-contentful-paint"&&(s.disconnect(),c.startTime<r.firstHiddenTime&&(i.value=Math.max(c.startTime-O(),0),i.entries.push(c),n(!0)))});s&&(n=k(e,i,Oe,t.reportAllChanges),I(u=>{i=y("FCP"),n=k(e,i,Oe,t.reportAllChanges),se(()=>{i.value=performance.now()-u.timeStamp,n(!0)})}))})},Ae=[.1,.25],ze=(e,t={})=>{de(ue(()=>{let r,n=y("CLS",0),i=le(t,re),s=c=>{for(let f of c)i.h(f);i.i>n.value&&(n.value=i.i,n.entries=i.o,r())},u=A("layout-shift",s);u&&(r=k(e,n,Ae,t.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(s(u.takeRecords()),r(!0))}),I(()=>{i.i=0,n=y("CLS",0),r=k(e,n,Ae,t.reportAllChanges),se(()=>r())}),setTimeout(r))}))},Be=0,te=1/0,V=0,dt=e=>{for(let t of e)t.interactionId&&(te=Math.min(te,t.interactionId),V=Math.max(V,t.interactionId),Be=V?(V-te)/7+1:0)},ne,_e=()=>{var e;return ne?Be:(e=performance.interactionCount)!=null?e:0},ft=()=>{"interactionCount"in performance||ne||(ne=A("event",dt,{type:"event",buffered:!0,durationThreshold:0}))},Me=0,ie=class{constructor(){v(this,"u",[]);v(this,"l",new Map);v(this,"m");v(this,"v")}p(){Me=_e(),this.u.length=0,this.l.clear()}P(){let t=Math.min(this.u.length-1,Math.floor((_e()-Me)/50));return this.u[t]}h(t){var i,s;if((i=this.m)==null||i.call(this,t),!t.interactionId&&t.entryType!=="first-input")return;let r=this.u.at(-1),n=this.l.get(t.interactionId);if(n||this.u.length<10||t.duration>r.T){if(n?t.duration>n.T?(n.entries=[t],n.T=t.duration):t.duration===n.T&&t.startTime===n.entries[0].startTime&&n.entries.push(t):(n={id:t.interactionId,entries:[t],T:t.duration},this.l.set(n.id,n),this.u.push(n)),this.u.sort((u,c)=>c.T-u.T),this.u.length>10){let u=this.u.splice(10);for(let c of u)this.l.delete(c.id)}(s=this.v)==null||s.call(this,n)}}},Ke=e=>{let t=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?e():(e=ue(e),document.addEventListener("visibilitychange",e,{once:!0}),t(()=>{e(),document.removeEventListener("visibilitychange",e)}))},Fe=[200,500],je=(e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&B(()=>{var c;ft();let r,n=y("INP"),i=le(t,ie),s=f=>{Ke(()=>{for(let P of f)i.h(P);let d=i.P();d&&d.T!==n.value&&(n.value=d.T,n.entries=d.entries,r())})},u=A("event",s,{durationThreshold:(c=t.durationThreshold)!=null?c:40});r=k(e,n,Fe,t.reportAllChanges),u&&(u.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(s(u.takeRecords()),r(!0))}),I(()=>{i.p(),n=y("INP"),r=k(e,n,Fe,t.reportAllChanges)}))})},ae=class{constructor(){v(this,"m")}h(t){var r;(r=this.m)==null||r.call(this,t)}},Ne=[2500,4e3],He=(e,t={})=>{B(()=>{let r=Ve(),n,i=y("LCP"),s=le(t,ae),u=f=>{t.reportAllChanges||(f=f.slice(-1));for(let d of f)s.h(d),d.startTime<r.firstHiddenTime&&(i.value=Math.max(d.startTime-O(),0),i.entries=[d],n())},c=A("largest-contentful-paint",u);if(c){n=k(e,i,Ne,t.reportAllChanges);let f=ue(()=>{u(c.takeRecords()),c.disconnect(),n(!0)});for(let d of["keydown","click","visibilitychange"])addEventListener(d,()=>Ke(f),{capture:!0,once:!0});I(d=>{i=y("LCP"),n=k(e,i,Ne,t.reportAllChanges),se(()=>{i.value=performance.now()-d.timeStamp,n(!0)})})}})},We=[800,1800],oe=e=>{document.prerendering?B(()=>oe(e)):document.readyState!=="complete"?addEventListener("load",()=>oe(e),!0):setTimeout(e)},qe=(e,t={})=>{let r=y("TTFB"),n=k(e,r,We,t.reportAllChanges);oe(()=>{let i=ce();i&&(r.value=Math.max(i.responseStart-O(),0),r.entries=[i],n(!0),I(()=>{r=y("TTFB",0),n=k(e,r,We,t.reportAllChanges),n(!0)}))})};var j={lcp:null,cls:null,inp:null,fcp:null,ttfb:null},U=!1,K=null;function gt(){if(U)return;Object.values(j).every(t=>t!==null)&&fe()}function fe(){U||(U=!0,K&&(clearTimeout(K),K=null),o("Sending web vitals data:",j),p("performance",{eventName:"web-vitals",webVitals:j}))}function _(e){if(U)return;let t=e.name.toLowerCase();j[t]=e.value,o(`Collected ${t}:`,e.value),gt()}function Qe(){if(!l.trackWebVitals){o("Web vitals tracking is disabled.");return}o("Initializing web vitals tracking...");try{He(_),ze(_),je(_),de(_),qe(_),K=setTimeout(()=>{U||(o("Web vitals timeout reached, sending collected metrics."),fe())},2e4),window.addEventListener("beforeunload",()=>{U||fe()}),o("Web vitals tracking initialized successfully.")}catch(e){a("Error setting up web vitals tracking:",e)}}var M=null,F=null;function Je(){l.captureErrors&&(o("Setting up error tracking"),M=e=>{pt(e)},F=e=>{mt(e)},window.addEventListener("error",M),window.addEventListener("unhandledrejection",F))}function Ge(){M&&(window.removeEventListener("error",M),M=null),F&&(window.removeEventListener("unhandledrejection",F),F=null),o("Error tracking cleaned up")}function pt(e){var s,u;let t=window.location.origin,r=e.filename||"";if(r)try{if(new URL(r).origin!==t){o("Skipping third-party error:",r);return}}catch(c){}let n=((s=e.error)==null?void 0:s.stack)||"";if(!r&&n&&!n.includes(t)){o("Skipping third-party error based on stack trace");return}let i={message:(e.message||"Unknown error").substring(0,500),stack:n.substring(0,2e3),filename:r||void 0,lineno:e.lineno||void 0,colno:e.colno||void 0,timestamp:Date.now()};H(((u=e.error)==null?void 0:u.name)||"Error",i)}function mt(e){let t="Unhandled promise rejection",r="";e.reason instanceof Error?(t=e.reason.message||t,r=e.reason.stack||""):typeof e.reason=="string"?t=e.reason:e.reason&&typeof e.reason=="object"&&(t=JSON.stringify(e.reason));let n={message:t.substring(0,500),stack:r.substring(0,2e3),timestamp:Date.now()};H("UnhandledRejection",n)}function H(e,t,r){let n=h({error_name:e,message:t.message},r);t.stack&&(n.stack=t.stack),t.filename&&(n.filename=t.filename),t.lineno&&(n.line_number=t.lineno),t.colno&&(n.column_number=t.colno),p("error",{eventName:e,properties:n})}function Xe(e,t){var r,n;if(!l.captureErrors){a("Error tracking is not enabled. Set captureErrors: true in config.");return}if(e instanceof ErrorEvent){let i={message:(e.message||"Unknown error").substring(0,500),stack:(((r=e.error)==null?void 0:r.stack)||"").substring(0,2e3),filename:e.filename||void 0,lineno:e.lineno||void 0,colno:e.colno||void 0,timestamp:Date.now()};H(((n=e.error)==null?void 0:n.name)||"Error",i,t)}else{let i={message:(e.message||"Unknown error").substring(0,500),stack:(e.stack||"").substring(0,2e3),timestamp:Date.now()};H(e.name||"Error",i,t)}}var Q=null,L=!1,ge=null,S=[],q,pe=null,me;function ht(){return`${Date.now()}-${Math.random().toString(36).substring(2,15)}`}async function Ye(e){if(l.enableSessionReplay){me=e,pe=ht();try{Q=(await import("rrweb")).record,o("rrweb loaded successfully"),Ze()}catch(t){a("Failed to load rrweb. Make sure it's installed as a peer dependency:",t)}}}function Ze(){var e;if(!(L||!Q||!l.enableSessionReplay))try{let t=l.replayPrivacyConfig||{},r={emit:n=>{kt({type:n.type,data:n.data,timestamp:n.timestamp||Date.now()})},recordCanvas:!1,collectFonts:!1,checkoutEveryNms:6e4,checkoutEveryNth:500,maskAllInputs:(e=t.maskAllInputs)!=null?e:!0,maskInputOptions:{password:!0,email:!0},slimDOMOptions:{script:!1,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0},sampling:{mousemove:!1,mouseInteraction:{MouseUp:!1,MouseDown:!1,Click:!0,ContextMenu:!1,DblClick:!0,Focus:!0,Blur:!0,TouchStart:!1,TouchEnd:!1},scroll:500,input:"last",media:800}};t.maskTextSelectors&&t.maskTextSelectors.length>0&&(r.maskTextSelector=t.maskTextSelectors.join(", ")),ge=Q(r),L=!0,yt(),o("Session replay recording started")}catch(t){a("Failed to start session replay recording:",t)}}function et(){if(!l.enableSessionReplay){a("Session replay is not enabled. Enable it via remote config.");return}if(!Q){a("rrweb is not loaded. Ensure it's installed as a peer dependency.");return}if(L){o("Session replay is already recording");return}Ze()}function he(){if(!L){o("Session replay is not currently recording");return}ge&&ge(),L=!1,rt(),S.length>0&&ke(),o("Session replay recording stopped")}function tt(){return L}function kt(e){S.push(e),S.length>=250&&ke()}function yt(){rt(),q=window.setInterval(()=>{S.length>0&&ke()},5e3)}function rt(){q!==void 0&&(clearInterval(q),q=void 0)}function ke(){if(S.length===0||!pe)return;let e=[...S];S=[];let t={sessionId:pe,siteId:l.siteId,userId:me,events:e,metadata:{pageUrl:window.location.href,screenWidth:window.screen.width,screenHeight:window.screen.height,language:navigator.language}};vt(t).catch(r=>{a("Failed to send session replay batch:",r),S.unshift(...e)})}async function vt(e){let t=`${l.analyticsHost}/replay`,r=JSON.stringify(e),n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:r,mode:"cors",keepalive:!0});if(!n.ok)throw new Error(`Failed to send replay batch: ${n.status}`);o(`Session replay batch sent: ${e.events.length} events`)}function nt(e){me=e}function it(){he()}var g=!1,bt={init:async e=>{if(g){a("UnifyTracker SDK already initialized. Call init() only once.");return}await Te(e)&&(g=!0,o("Config:",h({},l)),Pe(),Re(),Qe(),Je(),await Ye(Y()||void 0))},pageview:e=>{if(!g){a("UnifyTracker SDK not initialized. Call uniTracker.init() first.");return}p("pageview",{pathOverride:e})},event:(e,t)=>{if(!g){a("UnifyTracker SDK not initialized. Call uniTracker.init() first.");return}if(!e){a("Event name is required and must be a string.");return}p("custom_event",{eventName:e,properties:t})},outbound:(e,t="",r="_self")=>{if(!g){a("UnifyTracker SDK not initialized. Call uniTracker.init() first.");return}if(!e){a("Outbound link URL is required and must be a string.");return}p("outbound",{properties:{url:e,text:t,target:r}})},identify:e=>{if(!g){a("UnifyTracker SDK not initialized. Call uniTracker.init() first.");return}Se(e),nt(e)},clearUserId:()=>{if(!g){a("UnifyTracker SDK not initialized. Call uniTracker.init() first.");return}we()},getUserId:()=>g?Y():(a("UnifyTracker SDK not initialized. Call uniTracker.init() first."),null),captureError:(e,t)=>{if(!g){a("UnifyTracker SDK not initialized. Call uniTracker.init() first.");return}Xe(e,t)},onPageChange:e=>g?Ue(e):(a("UnifyTracker SDK not initialized. Call uniTracker.init() first."),()=>{}),startSessionReplay:()=>{if(!g){a("UnifyTracker SDK not initialized. Call uniTracker.init() first.");return}et()},stopSessionReplay:()=>{if(!g){a("UnifyTracker SDK not initialized. Call uniTracker.init() first.");return}he()},isSessionReplayActive:()=>g?tt():(a("UnifyTracker SDK not initialized. Call uniTracker.init() first."),!1),cleanup:()=>{Le(),Ge(),it(),g=!1}},nr=bt;export{nr as default};
